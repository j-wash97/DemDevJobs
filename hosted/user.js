"use strict";var ErrorAlert=function(a){return/*#__PURE__*/React.createElement("div",{className:"alert alert-danger mt-3 mx-2"},a.error)},SuccessAlert=function(a){return/*#__PURE__*/React.createElement("div",{className:"alert alert-success mt-3 mx-2"},a.error)},CompGroup=function(a){var b=a.companies.map(function(a){return/*#__PURE__*/React.createElement("option",{key:a._id,value:a._id},a.name)});return/*#__PURE__*/React.createElement("div",null,/*#__PURE__*/React.createElement("label",{htmlFor:"company"},"Company"),/*#__PURE__*/React.createElement("select",{required:!0,name:"company",id:"company",className:"form-control"},/*#__PURE__*/React.createElement("option",{disabled:!0,selected:!0,hidden:!0},"Please Select a Company First"),b))},LocGroup=function(a){var b=a.locations.map(function(a){return/*#__PURE__*/React.createElement("option",{key:a._id,value:a._id},a.name)});return/*#__PURE__*/React.createElement("div",null,/*#__PURE__*/React.createElement("label",{htmlFor:"location"},"Location"),/*#__PURE__*/React.createElement("select",{required:!0,name:"location",id:"location",className:"form-control"},/*#__PURE__*/React.createElement("option",{disabled:!0,selected:!0,hidden:!0},"Please Select a Company First"),b))},PostingList=function(a){var b=a.postings.map(function(a){return/*#__PURE__*/React.createElement("a",{href:"#",className:"list-group-item list-group-item-action col","data-toggle":"modal","data-target":"#postingEdit","data-title":a.title,"data-level":a.level,"data-category":a.category,"data-location":a.location_id,"data-company":a.company_id,"data-salary":a.salary,"data-link":a.link,"data-description":a.description,"data-id":a._id,key:a._id},/*#__PURE__*/React.createElement("div",{className:"card"},/*#__PURE__*/React.createElement("div",{className:"card-body"},/*#__PURE__*/React.createElement("h5",{className:"card-title"},a.title),/*#__PURE__*/React.createElement("h6",{className:"card-subtitle mb-2"},a.company),/*#__PURE__*/React.createElement("h6",{className:"card-subtitle mb-2"},a.location),/*#__PURE__*/React.createElement("h6",{className:"card-subtitle mb-2"},"Created ",moment(a.date).fromNow()))))});return/*#__PURE__*/React.createElement("div",{className:"list-group col"},b)},CompanyList=function(a){var b=a.companies.map(function(a){return/*#__PURE__*/React.createElement("a",{href:"#",className:"list-group-item list-group-item-action col","data-toggle":"modal","data-target":"#companyEdit","data-name":a.name,"data-contact":a.contact,"data-id":a._id,key:a._id},/*#__PURE__*/React.createElement("div",{className:"card"},/*#__PURE__*/React.createElement("div",{className:"card-body"},/*#__PURE__*/React.createElement("h5",{className:"card-title"},a.name),/*#__PURE__*/React.createElement("h6",{className:"card-subtitle mb-2"},a.contact),/*#__PURE__*/React.createElement("h6",{className:"card-subtitle mb-2"},"Created ",moment(a.createdDate).fromNow()))))});return/*#__PURE__*/React.createElement("div",{className:"list-group col"},b,/*#__PURE__*/React.createElement("form",{className:"list-group-item col",action:"/submitCompany",id:"companyForm",name:"companyForm",onSubmit:handleCompSubmit},/*#__PURE__*/React.createElement("legend",null,"Add New Company"),/*#__PURE__*/React.createElement("div",{className:"form-group"},/*#__PURE__*/React.createElement("label",{htmlFor:"name"},"Name"),/*#__PURE__*/React.createElement("input",{className:"form-control",type:"text",name:"name",id:"name",placeholder:"Name"})),/*#__PURE__*/React.createElement("div",{className:"form-group"},/*#__PURE__*/React.createElement("label",{htmlFor:"contact"},"Contact Info"),/*#__PURE__*/React.createElement("input",{className:"form-control",type:"text",name:"contact",id:"contact",placeholder:"Name: ... Email: ... Phone: ..."})),/*#__PURE__*/React.createElement("input",{type:"hidden",name:"_csrf",value:a.csrf}),/*#__PURE__*/React.createElement("input",{type:"submit",value:"Add",className:"btn btn-primary"})),/*#__PURE__*/React.createElement("div",{id:"errorAlertComp"}))},JobSiteList=function(a){var b=a.jobSites.map(function(a){return/*#__PURE__*/React.createElement("a",{href:"#",className:"list-group-item list-group-item-action col","data-toggle":"modal","data-target":"#jobSiteEdit","data-name":a.name,"data-description":a.description,"data-company":a.company_id,"data-address":a.address,"data-id":a._id,key:a._id},/*#__PURE__*/React.createElement("div",{className:"card"},/*#__PURE__*/React.createElement("div",{className:"card-body"},/*#__PURE__*/React.createElement("h5",{className:"card-title"},a.name),/*#__PURE__*/React.createElement("h6",{className:"card-subtitle mb-2"},a.company),/*#__PURE__*/React.createElement("h6",{className:"card-subtitle mb-2"},a.address),/*#__PURE__*/React.createElement("h6",{className:"card-subtitle mb-2"},a.description),/*#__PURE__*/React.createElement("h6",{className:"card-subtitle mb-2"},"Created ",moment(a.createdDate).fromNow()))))}),c=a.companies.map(function(a){return/*#__PURE__*/React.createElement("option",{value:a._id},a.name," - ",a.contact)});return/*#__PURE__*/React.createElement("div",{className:"list-group col"},b,/*#__PURE__*/React.createElement("form",{className:"list-group-item col",action:"/submitJobSite",id:"jobSiteForm",name:"jobSiteForm",onSubmit:handleSiteSubmit},/*#__PURE__*/React.createElement("legend",null,"Add New Location"),/*#__PURE__*/React.createElement("div",{className:"form-group"},/*#__PURE__*/React.createElement("label",{htmlFor:"name"},"Name"),/*#__PURE__*/React.createElement("input",{className:"form-control",type:"text",name:"name",id:"name",placeholder:"Name"})),/*#__PURE__*/React.createElement("div",{className:"form-group"},/*#__PURE__*/React.createElement("label",{htmlFor:"company"},"Company"),/*#__PURE__*/React.createElement("select",{required:!0,className:"form-control",name:"company",id:"company"},/*#__PURE__*/React.createElement("option",{value:"",disabled:!0,selected:!0,hidden:!0},"Company"),c)),/*#__PURE__*/React.createElement("div",{className:"form-group"},/*#__PURE__*/React.createElement("label",{htmlFor:"address"},"Address"),/*#__PURE__*/React.createElement("input",{className:"form-control",type:"text",name:"address",id:"address",placeholder:"Address"})),/*#__PURE__*/React.createElement("div",{className:"form-group"},/*#__PURE__*/React.createElement("label",{htmlFor:"description"},"Description"),/*#__PURE__*/React.createElement("input",{type:"text",name:"description",id:"description",className:"form-control",placeholder:"Description"})),/*#__PURE__*/React.createElement("input",{type:"hidden",name:"_csrf",value:a.csrf}),/*#__PURE__*/React.createElement("input",{type:"submit",value:"Add",className:"btn btn-primary"})),/*#__PURE__*/React.createElement("div",{id:"errorAlertJob"}))},titleBarLinks=/*#__PURE__*/React.createElement("ul",{className:"navbar-nav",id:"titleBarLinks"},/*#__PURE__*/React.createElement("li",{className:"nav-item"},/*#__PURE__*/React.createElement("a",{className:"nav-link",href:"/"},"View Jobs")),/*#__PURE__*/React.createElement("li",{className:"nav-item active"},/*#__PURE__*/React.createElement("a",{className:"nav-link",href:"/user"},"Account")),/*#__PURE__*/React.createElement("li",{className:"nav-item"},/*#__PURE__*/React.createElement("a",{className:"nav-link",href:"/submit"},"Submit")),/*#__PURE__*/React.createElement("li",{className:"nav-item"},/*#__PURE__*/React.createElement("a",{className:"nav-link",href:"/logout"},"Logout"))),sendAjax=function(a,b,c,d,e){$.ajax({cache:!1,type:a,url:b,data:c,dataType:"json",success:d,error:e})},handlePostEdit=function(a){return a.preventDefault(),$("#postingEdit").modal("hide"),sendAjax("POST",$("#postEditForm").attr("action"),$("#postEditForm").serialize(),getData,function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:JSON.parse(a.responseText).error}),document.querySelector("#errorAlertEditComp"))}),!1},handleCompSubmit=function(a){return(a.preventDefault(),""==$("#companyForm").find("#name").val())?(ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:"A name is required"}),document.querySelector("#errorAlertComp")),!1):(sendAjax("POST",$("#companyForm").attr("action"),$("#companyForm").serialize(),getData,function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:JSON.parse(a.responseText).error}),document.querySelector("#errorAlertComp"))}),!1)},handleCompEdit=function(a){return(a.preventDefault(),""==$("#compEditForm").find("#name").val())?(ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:"A name is required"}),document.querySelector("#errorAlertEditComp")),!1):($("#companyEdit").modal("hide"),sendAjax("POST",$("#compEditForm").attr("action"),$("#compEditForm").serialize(),getData,function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:JSON.parse(a.responseText).error}),document.querySelector("#errorAlertEditComp"))}),!1)},handleSiteSubmit=function(a){return(a.preventDefault(),""==$("#jobSiteForm").find("#name").val())?(ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:"A name is required"}),document.querySelector("#errorAlertJob")),!1):""==$("#jobSiteForm").find("#company").val()||null==$("#jobSiteForm").find("#company").val()?(ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:"A company is required"}),document.querySelector("#errorAlertJob")),!1):""==$("#jobSiteForm").find("#address").val()?(ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:"An address is required"}),document.querySelector("#errorAlertJob")),!1):(sendAjax("POST",$("#jobSiteForm").attr("action"),$("#jobSiteForm").serialize(),getData,function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:JSON.parse(a.responseText).error}),document.querySelector("#errorAlertJob"))}),!1)},handleSiteEdit=function(a){return(a.preventDefault(),""==$("#jobEditForm").find("#name").val())?(ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:"A name is required"}),document.querySelector("#errorAlertEditJob")),!1):""==$("#jobEditForm").find("#company").val()||null==$("#jobEditForm").find("#company").val()?(ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:"A company is required"}),document.querySelector("#errorAlertEditJob")),!1):""==$("#jobEditForm").find("#address").val()?(ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:"An address is required"}),document.querySelector("#errorAlertEditJob")),!1):($("#jobSiteEdit").modal("hide"),sendAjax("POST",$("#jobEditForm").attr("action"),$("#jobEditForm").serialize(),getData,function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:JSON.parse(a.responseText).error}),document.querySelector("#errorAlertEditJob"))}),!1)},handlePassChange=function(a){return(a.preventDefault(),""==$("#changeForm").find("#old").val()||""==$("#changeForm").find("#pass").val()||""==$("#changeForm").find("#pass2").val())?(ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:"All fields are required"}),document.querySelector("#errorAlertPass")),!1):$("#changeForm").find("#pass").val()===$("#changeForm").find("#pass2").val()?(sendAjax("POST",$("#changeForm").attr("action"),$("#changeForm").serialize(),function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(SuccessAlert,{error:a.message}),document.querySelector("#errorAlertPass"))},function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:JSON.parse(a.responseText).error}),document.querySelector("#errorAlertPass"))}),!1):(ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:"Passwords do not match"}),document.querySelector("#errorAlertPass")),!1)},handleLocations=function(){return sendAjax("GET","/jobSites",$.param({company:$("#compGroup").find("#company").val()}),function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(LocGroup,{locations:a.jobSites}),document.querySelector("#locGroup"))},function(){return ReactDOM.render(/*#__PURE__*/React.createElement(LocGroup,{locations:[]}),document.querySelector("#locGroup"))})},getPostings=function(){return sendAjax("GET","/owned",null,function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(PostingList,{postings:a.postings}),document.querySelector("#postingPane"))},function(){return ReactDOM.render(/*#__PURE__*/React.createElement(PostingList,{postings:[]}),document.querySelector("#postingPane"))})},getJobSites=function(a,b){return sendAjax("GET","/jobSites",null,function(c){return getPostings(),ReactDOM.render(/*#__PURE__*/React.createElement(JobSiteList,{jobSites:c.jobSites,companies:b,csrf:a.csrfToken}),document.querySelector("#jobsitePane"),function(){return $("#jobEditForm").find("#company").append($("#jobSiteForm").find("#company").find("option[value=\"\"] ~ option").clone())})},function(){return getPostings(),ReactDOM.render(/*#__PURE__*/React.createElement(JobSiteList,{jobSites:[],companies:b,csrf:a.csrfToken}),document.querySelector("#jobsitePane"),function(){return $("#jobEditForm").find("#company").append($("#jobSiteForm").find("#company").find("option[value=\"\"] ~ option").clone())})})},getCompanies=function(a){return sendAjax("GET","/companies",null,function(b){return $("#jobEditForm").find("#company").empty(),getJobSites(a,b.companies),ReactDOM.render(/*#__PURE__*/React.createElement(CompanyList,{companies:b.companies,csrf:a.csrfToken}),document.querySelector("#companyPane"))},function(){return $("#jobEditForm").find("#company").empty(),getJobSites(a,[]),ReactDOM.render(/*#__PURE__*/React.createElement(CompanyList,{companies:[],csrf:a.csrfToken}),document.querySelector("#companyPane"))})},getData=function(){return sendAjax("GET","/getToken",null,getCompanies)};window.onload=function(){ReactDOM.render(titleBarLinks,document.querySelector("#linkList")),$("#changeForm").submit(handlePassChange),$("#postEditForm").submit(handlePostEdit),$("#compEditForm").submit(handleCompEdit),$("#jobEditForm").submit(handleSiteEdit),getData(),$("#postingEdit").on("show.bs.modal",function(a){$("#errorAlertEditPost").empty();var b=$(a.relatedTarget),c=b.data("title"),d=b.data("level"),e=b.data("category"),f=b.data("location"),g=b.data("company"),h=b.data("salary"),i=b.data("link"),j=b.data("description"),k=b.data("id"),l=$(this);l.find("#company").off("change"),l.find("#company").change(handleLocations),sendAjax("GET","/companies",null,function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(CompGroup,{companies:a.companies}),document.querySelector("#compGroup"),function(){return l.find("#company").val(g),handleLocations()})},function(){return ReactDOM.render(/*#__PURE__*/React.createElement(CompGroup,{companies:[]}),document.querySelector("#compGroup"),function(){return ReactDOM.render(/*#__PURE__*/React.createElement(LocGroup,{locations:[]}),document.querySelector("#locGroup"))})}),l.find("#postingEditLabel").text("Edit ".concat(c)),l.find("#title").val(c),l.find("#level").val(d),l.find("#category").val(e),l.find("#salary").val(h),l.find("#link").val(i),l.find("#description").val(j),l.find("input[name=_id]").val(k),l.find(".btn-primary").unbind().click(function(){return $("#postEditForm").submit()}),l.find(".btn-danger").unbind().click(function(){return sendAjax("POST",$("#postEditForm").attr("action"),"".concat($("#postEditForm").serialize(),"&remove=true"),getData,function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:JSON.parse(a.responseText).error}),document.querySelector("#errorAlertEditComp"))})})}),$("#companyEdit").on("show.bs.modal",function(a){$("#errorAlertEditComp").empty();var b=$(a.relatedTarget),c=b.data("name"),d=b.data("contact"),e=b.data("id"),f=$(this);f.find("#companyEditLabel").text("Edit ".concat(c)),f.find("#name").val(c),f.find("#contact").val(d),f.find("input[name=_id]").val(e),f.find(".btn-primary").unbind().click(function(){return $("#compEditForm").submit()}),f.find(".btn-danger").unbind().click(function(){return sendAjax("POST",$("#compEditForm").attr("action"),"".concat($("#compEditForm").serialize(),"&remove=true"),getData,function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:JSON.parse(a.responseText).error}),document.querySelector("#errorAlertEditComp"))})})}),$("#jobSiteEdit").on("show.bs.modal",function(a){$("#errorAlertEditJob").empty();var b=$(a.relatedTarget),c=b.data("name"),d=b.data("description"),e=b.data("company"),f=b.data("address"),g=b.data("id"),h=$(this);h.find("#jobSiteEditLabel").text("Edit ".concat(c)),h.find("#name").val(c),h.find("#description").val(d),h.find("#company").val(e),h.find("#address").val(f),h.find("input[name=_id]").val(g),h.find(".btn-primary").unbind().click(function(){return $("#jobEditForm").submit()}),h.find(".btn-danger").unbind().click(function(){return sendAjax("POST",$("#jobEditForm").attr("action"),"".concat($("#jobEditForm").serialize(),"&remove=true"),getData,function(a){return ReactDOM.render(/*#__PURE__*/React.createElement(ErrorAlert,{error:JSON.parse(a.responseText).error}),document.querySelector("#errorAlertEditJob"))})})})};